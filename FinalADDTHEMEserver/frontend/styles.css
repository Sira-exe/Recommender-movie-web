:root{
  --bg-color:#121212;--text-color:#f5f5f5;--card-color:#181818;--highlight:#d32f2f;
  --input-bg:#222;--border-color:#363636;--recommend-color:#ff8a80;
  --bg-image:url("1.png");--backdrop:rgba(0,0,0,.25)
}
body.light-theme{
  --bg-color:#fff;--text-color:#111;--card-color:#f8f8f8;--highlight:#c62828;
  --input-bg:#fff;--border-color:#d5d5d5;--recommend-color:#c62828;
  --bg-image:url("2.png");--backdrop:rgba(255,255,255,.35)
}
html,body{height:100%}
body{
  margin:0;font-family:'Segoe UI',system-ui,-apple-system,sans-serif;color:var(--text-color);
  background:var(--bg-color) var(--bg-image) center/cover no-repeat fixed;
  transition:background-color .3s,color .3s
}
body::before{content:"";position:fixed;inset:0;background:var(--backdrop);z-index:-1;pointer-events:none}
header{position:sticky;top:0;z-index:10;text-align:center;background:var(--highlight);color:#fff;padding:20px;font-size:24px;font-weight:700}
.theme-toggle{position:absolute;right:20px;top:50%;transform:translateY(-50%);background:#fff;color:var(--highlight);border:none;padding:6px 12px;border-radius:6px;cursor:pointer;font-weight:700}

.container{max-width:1000px;margin:28px auto;background:color-mix(in oklab,var(--card-color) 92%,transparent);
  padding:22px;border-radius:14px;box-shadow:0 10px 26px rgba(0,0,0,.28)}
h2{color:var(--highlight);border-bottom:2px solid var(--highlight);padding-bottom:6px;margin-top:6px}
.list-title{display:flex;align-items:center;gap:10px;color:var(--highlight);font-weight:800}

label{font-weight:600;display:block;margin-top:10px}
input{width:100%;padding:12px 12px;border:1px solid var(--border-color);border-radius:10px;background:var(--input-bg);color:var(--text-color)}
button{background:var(--highlight);color:#fff;border:none;padding:10px 16px;font-size:16px;border-radius:10px;cursor:pointer}
button:hover{filter:brightness(.95)}

/* ===== Autocomplete ===== */
.suggestions{ position:relative; }
.suggestions-list{
  position:absolute; left:0; right:0; top:100%;
  background: color-mix(in oklab, var(--card-color) 96%, transparent);
  border:1px solid var(--border-color); border-radius:12px;
  margin-top:6px; padding:6px 0; max-height:320px; overflow:auto; z-index:20;
  box-shadow:0 10px 24px rgba(0,0,0,.28); backdrop-filter: blur(2px);
}
.sugg-item{ display:flex; gap:12px; align-items:center; padding:8px 12px; cursor:pointer; }
.sugg-item:hover, .sugg-item.active{ background: color-mix(in oklab, var(--highlight) 20%, transparent); }
.sugg-thumb{ width:54px; height:80px; object-fit:cover; border-radius:6px; background:#555 }
.sugg-meta{ display:flex; flex-direction:column; line-height:1.2 }
.sugg-title{ font-weight:700 }
.sugg-year{ opacity:.85; font-size:.92rem }
.sugg-nores{ padding:8px 12px; opacity:.8 }

/* ===== Preview card ===== */
.preview-wrapper{ position:relative; margin-top:16px; }
.movie-preview{
  display:flex;
  flex-direction:column; /* stack vertically */
  align-items:center;
  gap:16px;
  background:#1f1f1f;
  border:2px solid var(--highlight);
  border-radius:16px;
  padding:18px;
  box-shadow: inset 0 2px 0 rgba(255,255,255,.04), 0 8px 16px rgba(0,0,0,.35);
}
.movie-preview.hidden{ display:none; }
#previewPoster{
  width:270px; height:auto; border-radius:8px; display:block;
  box-shadow:0 10px 20px rgba(0,0,0,.45); background:#111;
}
.info-card{
  width:100%;
  background:var(--input-bg);
  border:2px solid var(--highlight);
  border-radius:12px;
  padding:14px 16px;
  box-shadow:0 8px 14px rgba(0,0,0,.35);
}
.info-row{margin:8px 0}
.info-row b{font-weight:800}
.preview-title{
  font-size:18px; font-weight:800; margin:0 0 8px 0; color:#ddd; border-bottom:1px solid rgba(255,255,255,.08); padding-bottom:6px;
  white-space:nowrap; overflow:hidden; text-overflow:ellipsis;
}

/* ===== Table / list ===== */
table{width:100%;border-collapse:collapse;margin-top:14px;overflow:hidden;border-radius:12px}
th,td{padding:12px;text-align:left;border-bottom:1px solid var(--border-color);background:color-mix(in oklab,var(--input-bg) 96%,transparent)}
th{font-weight:800}
.action-buttons button{padding:6px 10px;font-size:14px}

/* Name cell: poster + title */
.name-cell{ display:flex; align-items:center; gap:12px; }
.name-thumb{ width:40px; height:60px; object-fit:cover; border-radius:4px; background:#333; box-shadow:0 2px 6px rgba(0,0,0,.3) }
.name-title{ font-weight:700 }

/* ===== Add button in preview ===== */
#addBtn {
  margin-top: 12px;
  width: 100%;
  font-weight: 700;
  background: var(--highlight);
  color: #fff;
  border: none;
  padding: 10px 16px;
  border-radius: 10px;
  cursor: pointer;
}
#addBtn:hover {
  filter: brightness(.95);
}
